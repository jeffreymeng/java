/*
 * Programmer: Jeffrey Meng
 * Date: Feb 15, 2018
 * Purpose:
 */

package animation;

import java.awt.event.*;

import javax.swing.JFrame;
import javax.swing.Timer;

public class Block implements ActionListener {
	int windowWidth, windowHeight, framerate, rectWidth, rectHeight;
	int x, y;
	double dx = 1, dy = 1;
	JFrame frame = null;
	Timer timer;
	//TODO: change to array list
	Block[] watching = new Block[100];
	int numWatching;
	public Block() {
		this.windowWidth = 600;
		this.windowHeight = 400;
		this.framerate = 30;
		this.rectWidth = 50;
		this.rectHeight = 50;
		this.frame = null;//will not work until you call setFrame()
		this.x = 0;
		this.y = 0;

	}

	public Block(int framerate, JFrame frame, int rectWidth, int rectHeight) {

		this.framerate = framerate;
		this.rectWidth = rectWidth;
		this.rectHeight = rectHeight;
		this.frame = frame;
		this.x = 0;
		this.y = 0;

	}
	public Block(int framerate, JFrame frame, int rectWidth, int rectHeight, int startX, int startY) {

		this.framerate = framerate;
		this.rectWidth = rectWidth;
		this.rectHeight = rectHeight;
		this.frame = frame;
		this.x = startX;
		this.y = startY;

	}
	public void start() {
		timer = new Timer((int) 1000.0 / framerate, this);
		timer.start();
	}

	public void stop() {
		timer.stop();
	}

	public int getX() {
		return x;
	}

	public int getY() {
		return y;
	}

	public double getDeltaX() {
		return dx;
	}

	public double getDeltaY() {
		return dy;
	}
	public void setXspeed(double speed) {
		dx = speed;
	}
	public void setYspeed(double speed) {
		dy = speed;
	}
	
	public void setFrame(JFrame frame) {
		this.frame = frame;
	}
	public JFrame getFrame() {
		return frame;
	}
	public void restart() {
		timer.restart();
		x = 0; y = 0;
	}
	public void restart(int x, int y) {
		timer.restart();
		this.x = x;
		this.y = y;
	}
	public void detect(Block block) {
		this.watching[numWatching] = block;
		//num watching starts counting at 1, so the numWatching will be the index of the first open slot.
	}
	public void actionPerformed(ActionEvent e) {
		x += (int) dx;
		y += (int) dy;

		if ((x + rectWidth) >= frame.getContentPane().getWidth() || (x) <= 0) {
			dx *= -1;

		}
		if ((y + rectHeight) >= frame.getContentPane().getHeight() || (y) <= 0) {
			dy *= -1;

		}
		System.out.println(x);
		if (frame != null) {
			frame.repaint();
		}

	}

}
